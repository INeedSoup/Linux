The `/etc/shadow` file stores sensitive authentication data for user accounts. Unlike `/etc/passwd`, which is world-readable, `/etc/shadow` is strictly protected. Only root and members of the `shadow` group can access it. This separation prevents regular users from reading password hashes and attempting offline cracking.

---

## **1. Purpose of `/etc/shadow`**

The shadow file contains:

- **Encrypted passwords** (hashed, not plain text)    
- **Password aging and expiration settings**    
- **Account lock information**    

Keeping this information separate from `/etc/passwd` improves security. While `/etc/passwd` exposes basic user information to all processes, `/etc/shadow` restricts access to protect authentication data.

---

## **2. Viewing `/etc/shadow`**

Because of its sensitive contents, you need elevated privileges to read it:

```
sudo cat /etc/shadow
```

A typical entry looks like:

```
root:MyEPTEa$6Nonsense:15000:0:99999:7:::
```

Each line represents a user and contains multiple colon-separated fields.

---

## **3. Structure of an `/etc/shadow` Entry**

Each entry contains **nine fields**, separated by colons. Here is what each field means:

1. **Username**  
    The login name that corresponds to an entry in `/etc/passwd`.    
2. **Encrypted Password (Hash)**    
    - Stored as a hash, often using SHA-512 (`$6$`), SHA-256 (`$5$`), or other schemes.        
    - `*` or `!` means the account is **locked** and cannot authenticate.        
    - Blank field means **no password**, which is rare and insecure.        
3. **Date of Last Password Change**  
    Days since January 1, 1970 (the Unix epoch).    
    - `0` forces user to change password at next login.        
4. **Minimum Password Age**  
    Minimum number of days before the user can change their password again.    
5. **Maximum Password Age**  
    Maximum number of days a password is valid.  
    After this, the user must create a new one.    
6. **Password Warning Period**  
    Days before expiration when the system starts warning the user.    
7. **Password Inactivity Period**  
    Days after the password expires before the account becomes disabled.    
8. **Account Expiration Date**  
    An absolute date (days since Jan 1, 1970) when the account is locked.    
9. **Reserved Field**  
    Currently unused but kept for future features or compatibility.    

---

## **4. Understanding Password Hash Formats**

The password field usually contains a string like:

```
$6$HASHVALUE
```

The number indicates the hashing algorithm:

- `$6$` → SHA-512    
- `$5$` → SHA-256    
- `$1$` → MD5 (deprecated)    
- `$y$` → Yescrypt (modern systems)    

This modular format helps systems support stronger hashing algorithms over time.

---

## **5. System Integration with PAM**

Modern distributions rely on **Pluggable Authentication Modules (PAM)**, which handle:

- Password complexity rules    
- Multi-factor authentication    
- Account lockouts    
- Authentication methods beyond local passwords    

`/etc/shadow` still stores the core password and aging information, but PAM controls the overall login behavior across the system.

---

## **6. Security Considerations**

- `/etc/shadow` permissions are typically `640` (root owned, group-readable by `shadow`).    
- Exposure of this file is severe because hash cracking can be done offline.    
- Tools like `passwd`, `chage`, and `usermod` modify this file safely.